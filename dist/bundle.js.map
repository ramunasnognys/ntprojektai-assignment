{"version":3,"file":"bundle.js","sources":["../app/js/get-focusable-elements.js","../app/js/burger-menu.js","../app/js/index.js"],"sourcesContent":["console.log('focus aaaaa');\r\n/**\r\n * Returns back a NodeList of focusable elements\r\n * that exist within the passed parnt HTMLElement\r\n *\r\n * @param {HTMLElement} parent HTML element\r\n * @returns {NodeList} The focusable elements that we can find\r\n */\r\nexport default (parent) => {\r\n    if (!parent) {\r\n      console.warn('You need to pass a parent HTMLElement');\r\n      return [];\r\n    }\r\n  \r\n    return parent.querySelectorAll('button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"]):not([disabled]), details:not([disabled]), summary:not(:disabled)');\r\n  };\r\n  ","console.log(\"Helllllow\");\r\nimport getFocusableElements from './get-focusable-elements.js';\r\n\r\nclass BurgerMenu extends HTMLElement {\r\n  constructor() {\r\n    super();\r\n\r\n    const self = this;\r\n\r\n    this.state = new Proxy(\r\n      {\r\n        status: 'open',\r\n        enabled: false,\r\n      },\r\n      {\r\n        set(state, key, value) {\r\n          const oldValue = state[key];\r\n\r\n          state[key] = value;\r\n          if (oldValue !== value) {\r\n            self.processStateChange();\r\n          }\r\n          return state;\r\n        },\r\n      }\r\n    );\r\n  }\r\n\r\n  get maxWidth() {\r\n    return parseInt(this.getAttribute('max-width') || 9999, 10);\r\n  }\r\n\r\n  connectedCallback() {\r\n    this.initialMarkup = this.innerHTML;\r\n    this.render();\r\n\r\n    const observer = new ResizeObserver((observedItems) => {\r\n      const { contentRect } = observedItems[0];\r\n      this.state.enabled = contentRect.width <= this.maxWidth;\r\n    });\r\n\r\n    // We want to watch the parent like a hawk\r\n    observer.observe(this.parentNode);\r\n  }\r\n\r\n  render() {\r\n    this.innerHTML = `\r\n      <div class=\"burger-menu\" data-element=\"burger-root\">\r\n        <button class=\"burger-menu__trigger\" data-element=\"burger-menu-trigger\" type=\"button\" aria-label=\"Open menu\">\r\n          <span class=\"burger-menu__bar\" aria-hidden=\"true\"></span>\r\n        </button>\r\n        <div class=\"burger-menu__panel\" data-element=\"burger-menu-panel\">\r\n          ${this.initialMarkup} \r\n        </div>\r\n      </div>\r\n    `;\r\n\r\n    this.postRender();\r\n  }\r\n\r\n  postRender() {\r\n    this.trigger = this.querySelector('[data-element=\"burger-menu-trigger\"]');\r\n    this.panel = this.querySelector('[data-element=\"burger-menu-panel\"]');\r\n    this.root = this.querySelector('[data-element=\"burger-root\"]');\r\n    this.focusableElements = getFocusableElements(this);\r\n\r\n    if (this.trigger && this.panel) {\r\n      this.toggle();\r\n\r\n      this.trigger.addEventListener('click', (evt) => {\r\n        evt.preventDefault();\r\n\r\n        this.toggle();\r\n      });\r\n\r\n      document.addEventListener('focusin', () => {\r\n        if (!this.contains(document.activeElement)) {\r\n          this.toggle('closed');\r\n        }\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    this.innerHTML = this.initialMarkup;\r\n  }\r\n\r\n  toggle(forcedStatus) {\r\n    if (forcedStatus) {\r\n      if (this.state.status === forcedStatus) {\r\n        return;\r\n      }\r\n\r\n      this.state.status = forcedStatus;\r\n    } else {\r\n      this.state.status = this.state.status === 'closed' ? 'open' : 'closed';\r\n    }\r\n  }\r\n\r\n  processStateChange() {\r\n    this.root.setAttribute('status', this.state.status);\r\n    this.root.setAttribute('enabled', this.state.enabled ? 'true' : 'false');\r\n\r\n    this.manageFocus();\r\n\r\n    switch (this.state.status) {\r\n      case 'closed':\r\n        this.trigger.setAttribute('aria-expanded', 'false');\r\n        this.trigger.setAttribute('aria-label', 'Open menu');\r\n        break;\r\n      case 'open':\r\n      case 'initial':\r\n        this.trigger.setAttribute('aria-expanded', 'true');\r\n        this.trigger.setAttribute('aria-label', 'Close menu');\r\n        break;\r\n    }\r\n  }\r\n\r\n  manageFocus() {\r\n    if (!this.state.enabled) {\r\n      this.focusableElements.forEach((element) => element.removeAttribute('tabindex'));\r\n      return;\r\n    }\r\n\r\n    switch (this.state.status) {\r\n      case 'open':\r\n        this.focusableElements.forEach((element) => element.removeAttribute('tabindex'));\r\n        break;\r\n      case 'closed':\r\n        [...this.focusableElements].filter((element) => element.getAttribute('data-element') !== 'burger-menu-trigger').forEach((element) => element.setAttribute('tabindex', '-1'));\r\n        break;\r\n    }\r\n  }\r\n}\r\n\r\nif ('customElements' in window) {\r\n  customElements.define('burger-menu', BurgerMenu);\r\n}\r\n\r\nexport default BurgerMenu;\r\n","// (bundle from remote urls)\r\n// import Whatever from 'https://unpkg.com/whatever'\r\n// import $ from \"./burger-menu.js\";\r\n// (bundle from npm)\r\n// import Whatever from 'whatever'\r\n// import $ from 'blingblingjs'\r\n\r\n// (bundle from local)\r\n// import whatever from './whatever.js'\r\n\r\n// postCSS processed css-4-js\r\n// (file as string)\r\n// import { default as index_css }  from './css/index.css'\r\nimport \"./burger-menu.js\";\r\nimport \"./get-focusable-elements.js\";\r\nconsole.log(\"ðŸ’€\");\r\n"],"names":["console","BurgerMenu","self","Proxy","status","enabled","set","state","key","value","oldValue","HTMLElement","this","ResizeObserver","observedItems","_this2","parent","getFocusableElements","evt","document","_this3","forcedStatus","element","customElements"],"mappings":"g/CAAAA,YAAY,2BCAA,iBAGNC,+HAIIC,sBAEO,IAAIC,MACf,CACEC,OAAQ,OACRC,SAAS,GAEX,CACEC,aAAIC,EAAOC,EAAKC,OACRC,EAAWH,EAAMC,YAEjBA,GAAOC,MACIA,GACfP,sQAjBaS,+WA8BAC,iCAGAC,gBAAe,SAACC,GAEnCC,gBADwBD,EAAc,sBACIC,sBAI3BH,6aAUTA,8IASOA,mBAAmB,mDACrBA,mBAAmB,gDACpBA,mBAAmB,gCACeI,WAAAA,sBDlDf,+NAJhB,2CACN,0BCqDgBC,gBAELL,wDAGY,SAAS,SAACM,GACtCA,iCAKFC,0BAA0B,WAAW,WAC9BC,WAAcD,yBACjBC,SAAY,6BAODR,kDAGZS,GACDA,EACET,oBAAsBS,sBAINA,qBAEsB,WAAtBT,kBAAiC,OAAS,oFAKzC,SAAUA,0CACV,UAAWA,mBAAqB,OAAS,4BAIxDA,uBACD,mCACuB,gBAAiB,mCACjB,aAAc,uBAErC,WACA,oCACuB,gBAAiB,kCACjB,aAAc,wDAMvCA,0BAKGA,uBACD,uCAC4B,SAACU,4BAAoC,yBAEjE,wnBACCV,gCAA+B,SAACU,SAAqD,wBAAzCA,eAAqB,4BAAmD,SAACA,yBAAiC,WAAY,8CATzI,SAACA,4BAAoC,gEA3FtDV,kBAAkB,cAAgB,KAAM,wCA2G1DW,sBAAsB,cAAetB,eCzH3B"}